/* ============================================
   DEBUG: Grid de ayuda para baseline
   Solo visible en pantalla, no al imprimir
   Condicionado a la clase 'show-baseline-grid' en el elemento html
   ============================================ */

@media screen,
pagedjs-ignore {
    /* Definir --baseline en este contexto para que esté disponible */
    /* Debe coincidir con el valor definido en theme.css dentro de @media print */
    :root {
        --baseline: calc(10.5pt * 1.2);  /* 12.6pt - debe coincidir con --baseline de theme.css */
    }

    /* Solo aplicar estilos cuando el html tenga la clase show-baseline-grid */
    html.show-baseline-grid {
        /* grid de lineas */
        /* Baseline grid solo en el área de contenido, alineado con el texto */
        /* Excluir páginas en blanco */
    }
    
    html.show-baseline-grid .pagedjs_page:not(.pagedjs_blank_page) .pagedjs_area {
        --pagedjs-baseline: calc(10.5pt * 1.2);  /* 12.6pt - debe coincidir con --baseline */
        --pagedjs-baseline-color: rgba(0, 150, 255, 0.15);
        position: relative;
        /* Borde suave que no ocupa espacio */
        outline: 1px solid rgba(0, 150, 255, 0.2);
        outline-offset: -1px;
    }
    
    /* Grid aplicado solo al área de contenido (no en márgenes) */
    html.show-baseline-grid .pagedjs_page:not(.pagedjs_blank_page) .pagedjs_area::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        pointer-events: none;
        background-image: linear-gradient(
            transparent 0%,
            transparent calc(var(--pagedjs-baseline) - 1px),
            var(--pagedjs-baseline-color) calc(var(--pagedjs-baseline) - 1px),
            var(--pagedjs-baseline-color) var(--pagedjs-baseline)
        );
        background-size: 100% var(--pagedjs-baseline);
        background-repeat: repeat-y;
        background-position: 0 0;
        z-index: 0;
    }
    
    /* Asegurar que el contenido esté por encima del grid */
    html.show-baseline-grid .pagedjs_page_content {
        position: relative;
        z-index: 1;
    }

    html.show-baseline-grid h1,
    html.show-baseline-grid h2,
    html.show-baseline-grid h3,
    html.show-baseline-grid h4,
    html.show-baseline-grid h5,
    html.show-baseline-grid h6 {
        outline: 1px solid rgba(220, 150, 50, 0.25); /* Outline naranja */
        position: relative; /* Necesario para posicionar el pseudo-elemento */
    }
    
    /* Línea vertical en el margen izquierdo que muestra la altura total incluyendo márgenes */
    /* Márgenes en color más claro y ancho, contenido en color más oscuro y delgado */
    html.show-baseline-grid h1::before,
    html.show-baseline-grid h2::before,
    html.show-baseline-grid h3::before,
    html.show-baseline-grid h4::before,
    html.show-baseline-grid h5::before,
    html.show-baseline-grid h6::before {
        content: '';
        position: absolute;
        left: -2px; /* Cerca del borde del grid */
        top: 0;
        width: 3px; /* Ancho estándar para márgenes */
        background-color: rgba(220, 150, 50, 0.2); /* Naranja claro para márgenes */
        pointer-events: none;
        z-index: 1000;
    }
    
    /* Línea para el contenido del elemento (más oscura y delgada) */
    html.show-baseline-grid h1::after,
    html.show-baseline-grid h2::after,
    html.show-baseline-grid h3::after,
    html.show-baseline-grid h4::after,
    html.show-baseline-grid h5::after,
    html.show-baseline-grid h6::after {
        content: '';
        position: absolute;
        left: -1px; /* Ligeramente más cerca del borde que la línea de márgenes */
        top: 0;
        bottom: 0;
        width: 2px; /* Delgado estándar para contenido */
        background-color: rgba(220, 150, 50, 0.5); /* Naranja más oscuro para el contenido */
        pointer-events: none;
        z-index: 1001;
    }
    
    /* Extender las líneas para incluir márgenes superiores e inferiores */
    html.show-baseline-grid h1::before {
        top: calc(var(--baseline) * -8); /* Extiende hacia arriba el margin-top */
        height: calc(100% + var(--baseline) * 8 + var(--baseline) * 3); /* Incluye margin-top y margin-bottom */
    }
    
    html.show-baseline-grid h1::after {
        top: 0; /* Solo el contenido, sin márgenes */
        height: 100%;
    }
    
    html.show-baseline-grid h2::before {
        top: calc(var(--baseline) * -2);
        height: calc(100% + var(--baseline) * 2 + var(--baseline) * 1.5);
    }
    
    html.show-baseline-grid h2::after {
        top: 0;
        height: 100%;
    }
    
    html.show-baseline-grid h3::before {
        top: calc(var(--baseline) * -2);
        height: calc(100% + var(--baseline) * 2 + var(--baseline));
    }
    
    html.show-baseline-grid h3::after {
        top: 0;
        height: 100%;
    }
    
    html.show-baseline-grid h4::before,
    html.show-baseline-grid h5::before,
    html.show-baseline-grid h6::before {
        top: calc(var(--baseline) * -1);
        height: calc(100% + var(--baseline) + var(--baseline));
    }
    
    html.show-baseline-grid h4::after,
    html.show-baseline-grid h5::after,
    html.show-baseline-grid h6::after {
        top: 0;
        height: 100%;
    }
    
    /* Marcas para <hr> en el margen izquierdo */
    html.show-baseline-grid hr {
        position: relative;
        outline: 1px solid rgba(200, 120, 50, 0.3); /* Borde naranja suave */
    }
    
    html.show-baseline-grid hr::before {
        content: '';
        position: absolute;
        left: -2px; /* Cerca del borde del grid */
        top: 0;
        bottom: 0;
        width: 3px; /* Mismo ancho estándar que otras marcas de márgenes */
        background-color: rgba(200, 120, 50, 0.2); /* Color naranja suave para márgenes */
        pointer-events: none;
        z-index: 1000;
    }
    
    html.show-baseline-grid hr::after {
        content: '';
        position: absolute;
        left: -1px; /* Ligeramente más cerca del borde */
        top: 0;
        bottom: 0;
        width: 2px; /* Delgado estándar para contenido */
        background-color: rgba(200, 120, 50, 0.4); /* Color naranja más oscuro para contenido */
        pointer-events: none;
        z-index: 1001;
    }
    
    /* Marcas para <p> en gris muy claro en el margen izquierdo */
    html.show-baseline-grid p {
        position: relative;
    }
    
    html.show-baseline-grid p::before {
        content: '';
        position: absolute;
        left: -2px; /* Cerca del borde del grid */
        top: calc(var(--baseline) * -0.5); /* Incluye margin-top aproximado */
        bottom: calc(var(--baseline) * -0.5); /* Incluye margin-bottom aproximado */
        width: 3px; /* Mismo ancho estándar que otras marcas de márgenes */
        background-color: rgba(150, 150, 150, 0.15); /* Gris muy claro para márgenes */
        pointer-events: none;
        z-index: 1000;
    }
    
    /* Línea para el contenido del párrafo */
    html.show-baseline-grid p::after {
        content: '';
        position: absolute;
        left: -1px; /* Ligeramente más cerca del borde que la línea de márgenes */
        top: 0;
        bottom: 0;
        width: 2px; /* Delgado estándar para contenido */
        background-color: rgba(150, 150, 150, 0.3); /* Gris para el contenido */
        pointer-events: none;
        z-index: 1001;
    }
}
