/* 
 * Estilos para la vista previa del documento
 * Estos estilos simulan el aspecto final del documento (epub, pdf)
 */

/* === TIPOGRAFÍA BASE === */
.preview-content {
    --font-base: 'Garamond', 'Noto Serif', serif !important;
    --font-title: var(--font-base) !important;
    font-family: var(--font-base) !important;
}

.preview-content .toc-list a {
    display: flex;
    text-decoration: none;
    color: inherit;
}

.toc-text {
    white-space: nowrap;
}

/* Puntos de relleno - estilo moderno */
.toc-list a::before {
    content: "";
    flex: 1;
    border-bottom: 1px dotted;
    margin: 0 0.5em 0.3em;
    opacity: 0.4;
    order: 1;
}

/* CSS counter to simulate page numbers in preview */
.toc-list {
    counter-reset: toc-page;
}

.toc-list a::after {
    counter-increment: toc-page;
    content: counter(toc-page);
    order: 2;
    opacity: 0.4;
    font-size: 0.9em;
}

/* TOC level indentation */
.toc-list .toc-level-2 {
    padding-left: 1.5em;
}

.toc-list .toc-level-3 {
    padding-left: 3em;
}

/* === BLOQUE DE TÍTULO DEL DOCUMENTO === */
.preview-content .title-block {
    text-align: center;
    margin-bottom: 2rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid var(--border);
    width: 100%;
}

.preview-content .title-block p {
    text-align: center;
    text-indent: 0;
}

.preview-content .title-block .document-title {
    margin: 0 0 0.5rem;
    font-size: 2rem;

}

.preview-content .title-block .document-author {
    margin: 0;
    font-variant: small-caps;
    font-size: 1.1rem;
    opacity: 0.8;

}

.preview-content .title-block .document-date {
    margin: 0.5rem 0 0;
    font-size: 0.9rem;
    opacity: 0.6;
}

.preview-content .title-block .metadata {
    width: 70%;
    margin: 1rem auto 0;
    font-size: 0.9rem;
    color: var(--text-muted);
    text-align: center;
    white-space: pre-wrap;
}

/* === PÁRRAFOS === */
.preview-content p {
    text-indent: 0;
    margin: 0;
    text-align: justify;
    hyphens: auto;
    hyphenate-limit-chars: 5 2 2;
    hyphenate-limit-lines: 3;
    hyphenate-limit-zone: 0%;
    line-height: 1.25;
}

/* Sangría en párrafos consecutivos */
.preview-content p+p {
    text-indent: 1.5em;
}

/* === TÍTULOS === */
.preview-content h1,
.preview-content h2 {
    text-align: center;
    margin-top: 2rem;
    margin-bottom: 1rem;
}

.preview-content h1 {
    font-size: 1.75rem;
}

.preview-content h2 {
    font-size: 1.35rem;
}

.preview-content h3 {
    text-align: left;
    font-size: 1.25rem;
    font-weight: normal;
    font-variant: small-caps;
    margin-top: 1.5rem;
    margin-bottom: 0.75rem;
}

.preview-content h4 {
    text-align: left;
    font-size: 1.15rem;
    font-style: italic;
    font-weight: normal;
    margin-top: 1.25rem;
    margin-bottom: 0.5rem;
}

.preview-content h5 {
    text-align: left;
    font-size: 1.1rem;
    font-weight: normal;
    font-variant: small-caps;
    margin-top: 1rem;
    margin-bottom: 0.5rem;
}

.preview-content h6 {
    text-align: left;
    font-size: 1rem;
    font-variant: small-caps;
    font-weight: normal;
    margin-top: 1rem;
    margin-bottom: 0.5rem;
}

/* === LISTAS === */
.preview-content ul,
.preview-content ol {
    margin: 1rem 0;
    padding-left: 2em;
}

.preview-content li {
    margin-bottom: 0.25em;
    line-height: 1.4;
}

.preview-content li p {
    text-indent: 0;
    margin: 0;
}

/* === SEPARADORES === */
.preview-content hr {
    border: 0;
    height: 1rem;
}

/* === TITLEPAGE (portada) === */
.preview-content .titlepage {
    width: 90%;
    max-width: 15em;
    margin-left: auto;
    margin-right: auto;
    text-align: center;
}

.preview-content .titlepage p {
    text-indent: 0;
    text-align: center;
}

.preview-content .titlepage .author {
    font-variant: small-caps;
    margin-bottom: 2em;
}

.preview-content .titlepage .date,
.preview-content .titlepage .rights {
    font-size: 0.8em;
}

/* === SECCIONES ESPECIALES (COLOFÓN, DEDICATORIA, EPÍGRAFE) === */
.preview-content section.colophon,
.preview-content section.dedication,
.preview-content section.epigraph {
    padding-top: 25%;
}

.preview-content .colophon p,
.preview-content .dedication p,
.preview-content .epigraph p {
    text-align: center;
    text-indent: 0;
}

/* === TÍTULOS OCULTOS (no-title) === */
.preview-content h1.no-title,
.preview-content h2.no-title,
.preview-content h3.no-title,
.preview-content h4.no-title,
.preview-content h5.no-title,
.preview-content h6.no-title {
    display: none;
}

/* === ESTILOS PARA TÍTULOS OCULTOS === */
/* Colofón, Dedicatoria, Epígrafe */
.preview-content h1.colophon,
.preview-content h2.colophon,
.preview-content h1.dedication,
.preview-content h2.dedication,
.preview-content h1.epigraph,
.preview-content h2.epigraph {
    font-variant: small-caps;
    opacity: 0.3;
    font-size: 1.1rem;
    border: dashed 2px darkgray;
    border-radius: 0.5rem;
}

.preview-content h1.colophon::after,
.preview-content h1.dedication::after,
.preview-content h1.epigraph::after {
    content: "(Este título no se mostrará)";
    font-size: 0.6rem;
    color: darkgray;
    font-variant: normal;
}

.preview-content .colophon>p,
.preview-content .dedication>p,
.preview-content .epigraph>p {
    margin-top: 2rem;
    text-align: center;
}


.preview-content strong {
    font-variant: small-caps;
}

.preview-content a,
.preview-content a:visited {
    color: blue;
    text-decoration: underline;
}


/* Estilos se sección especiales.
   -------------------------------------------------------------------------------
   Al convetir md a html, se envueve en <section> cada h1 con su contenido, 
   estos estilos realmente se aplican al h1, pero los usamos para formatear la sección completa.

    const managedClasses = ["no-toc", "no-title", 
    "narrow", "right-column", 
    "vcenter", "vbottom", 
    "text-left", "text-center", "text-right",
     "text-small", "text-large", 
     "paragraph-spaced"];

*/
/* ancho de columna */
section:has(>h1.narrow), section.narrow {
    padding-left: 20% !important;
    padding-right: 20% !important;
}
section:has(>h1.right-column), section.right-column {
    padding-left: 25% !important;
}

/* alineación de texto, por defecto justify*/
section:has(>h1.text-left) p, section.text-left p {
    text-align: left;
}
section:has(>h1.text-center) p, section.text-center p {
    text-align: center;
}
section:has(>h1.text-right) p, section.text-right p {
    text-align: right;
}
/* tamaño de texto, el tamaño de texto se aplica a p, no al propio título */
section:has(>h1.text-small), section.text-small {
    font-size: 0.8rem;
}
section:has(>h1.text-large), section.text-large {
    font-size: 1.2rem;
}
/* separación de párrafos, por defecto es sin separación y con sangría */
section.paragraph-spaced p+p, .preview-content.paragraph-spaced p+p {
    text-indent: 0;
    margin-bottom: 1em;    
}
/* para la alineación vertical, simulamos un alto mínimo para la sección y usamos flex,
además dibujamos una flecha indicadora o dos */
section:has(>h1.vcenter), section.vcenter {
    min-height: 30em;
    display: flex;
    flex-direction: column;
    justify-content: center;
}
/* flechas indicadoras: largas (asta + punta), color teal */
section:has(>h1.vcenter) > :nth-child(2)::before,
section.vcenter > :nth-child(2)::before,
section:has(>h1.vbottom) > :nth-child(2)::before,
section.vbottom > :nth-child(2)::before {
    content: '';
    display: block;
    width: 12px;
    height: 2rem;
    margin: 0 auto 0.5rem auto;
    background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 12 32'%3E%3Cline x1='6' y1='0' x2='6' y2='22' stroke='%230d9488' stroke-width='2' stroke-linecap='round'/%3E%3Cpolygon points='6,32 0,22 12,22' fill='%230d9488'/%3E%3C/svg%3E") no-repeat center / contain;
}
/* flecha hacia arriba debajo del último hijo */
section:has(>h1.vcenter) > :last-child::after,
section.vcenter > :last-child::after {
    content: '';
    display: block;
    width: 12px;
    height: 2rem;
    margin: 0.5rem auto 0 auto;
    background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 12 32'%3E%3Cline x1='6' y1='32' x2='6' y2='10' stroke='%230d9488' stroke-width='2' stroke-linecap='round'/%3E%3Cpolygon points='6,0 0,10 12,10' fill='%230d9488'/%3E%3C/svg%3E") no-repeat center / contain;
}
section:has(>h1.vbottom), section.vbottom {
    min-height: 30em;
    display: flex;
    flex-direction: column;
    justify-content: flex-end;
}
/* hasta aquí -------------------------------------------------------------------- */

/* Estilos específicos para la web de maquetaco */

/* Para que las partes del documento salgan visualmente separadas (espacios en los saltos de línea) */

.preview-content .title-block,
.preview-content .toc-preview,
.preview-content section {
    border: solid 1px f7f7f7;
    background-color: white;
    padding: 2rem;
    margin-bottom: 2rem;
    box-shadow: var(--shadow);
}